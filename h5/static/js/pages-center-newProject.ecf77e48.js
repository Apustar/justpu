(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-center-newProject"],{"42ca":function(t,i,e){"use strict";e.r(i);var n=e("45cc"),r=e("6a5d");for(var a in r)"default"!==a&&function(t){e.d(i,t,(function(){return r[t]}))}(a);e("8113");var o,s=e("f0c5"),l=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"0c7aa622",null,!1,n["a"],o);i["default"]=l.exports},"45cc":function(t,i,e){"use strict";var n;e.d(i,"b",(function(){return r})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return n}));var r=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-form",[e("v-uni-view",{staticClass:"bg-white padding"},[e("v-uni-view",{staticClass:"cu-steps"},t._l(t.numList,(function(i,n){return e("v-uni-view",{key:n,staticClass:"cu-item",class:n>t.num?"":"text-blue"},[e("v-uni-text",{staticClass:"num",attrs:{"data-index":n+1},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.ChangeSteps(n)}}}),t._v(t._s(i.name))],1)})),1)],1),e("v-uni-view",{staticClass:"cu-form-group margin-top"},[e("v-uni-view",{staticClass:"title"},[t._v("项目名称")]),e("v-uni-input",{attrs:{placeholder:"请输入项目名称",name:"input"},model:{value:t.pro_name,callback:function(i){t.pro_name=i},expression:"pro_name"}})],1),e("v-uni-view",{staticClass:"cu-form-group margin-top",staticStyle:{"margin-top":"0px"}},[e("v-uni-view",{staticClass:"title"},[t._v("项目类型")]),e("v-uni-picker",{attrs:{value:t.index,range:t.picker},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.PickerChange.apply(void 0,arguments)}},model:{value:t.pro_type,callback:function(i){t.pro_type=i},expression:"pro_type"}},[e("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.index>-1?t.picker[t.index]:"请选择"))])],1)],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("项目相对方")]),e("v-uni-input",{attrs:{placeholder:"请输入项目向对方",name:"input"},model:{value:t.pro_to,callback:function(i){t.pro_to=i},expression:"pro_to"}})],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("联系人")]),e("v-uni-input",{attrs:{placeholder:"请输入联系人",name:"input"},model:{value:t.pro_link_person,callback:function(i){t.pro_link_person=i},expression:"pro_link_person"}})],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("职务")]),e("v-uni-input",{attrs:{placeholder:"请输入职务",name:"input"},model:{value:t.pro_position,callback:function(i){t.pro_position=i},expression:"pro_position"}})],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("手机号码")]),e("v-uni-input",{attrs:{type:"number",maxlength:"11",placeholder:"请输入您的手机号"},model:{value:t.pro_phone,callback:function(i){t.pro_phone=i},expression:"pro_phone"}}),e("v-uni-view",{staticClass:"cu-capsule radius"},[e("v-uni-view",{staticClass:"cu-tag bg-blue "},[t._v("+86")]),e("v-uni-view",{staticClass:"cu-tag line-blue"},[t._v("中国大陆")])],1)],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("项目地点")]),e("v-uni-input",{attrs:{placeholder:"请输入项目地点",name:"input"},model:{value:t.pro_place,callback:function(i){t.pro_place=i},expression:"pro_place"}})],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("预估收费")]),e("v-uni-input",{attrs:{type:"number",placeholder:"请输入预估收费",name:"input"},model:{value:t.pro_price,callback:function(i){t.pro_price=i},expression:"pro_price"}})],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("项目经理")]),t.multiArray1[0]?e("v-uni-picker",{attrs:{mode:"multiSelector",value:t.multiIndex1,range:t.multiArray1},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.MultiChange1.apply(void 0,arguments)},columnchange:function(i){arguments[0]=i=t.$handleEvent(i),t.MultiColumnChange1.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"picker",model:{value:t.pro_handle,callback:function(i){t.pro_handle=i},expression:"pro_handle"}},[t._v(t._s(t.pro_handle[0])+","+t._s(t.pro_handle[1]))])],1):t._e()],1),e("v-uni-view",{staticClass:"example-body"},[0!==t.pro_member.length?e("v-uni-view",{staticClass:"grid-dynamic-box"},t._l(t.pro_member,(function(i,n){return e("v-uni-view",{key:n,staticClass:"cu-form-group",attrs:{index:n}},[e("v-uni-view",{staticClass:"title"},[t._v("项目成员")]),t.multiArray2[0]?e("v-uni-picker",{attrs:{mode:"multiSelector",value:t.multiIndex2,range:t.multiArray2},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.re(n)},columnchange:function(i){arguments[0]=i=t.$handleEvent(i),t.MultiColumnChange2.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"picker",model:{value:t.pro_member,callback:function(i){t.pro_member=i},expression:"pro_member"}},[t._v(t._s(i.xx[0])+","+t._s(i.xx[1]))])],1):t._e()],1)})),1):t._e(),e("v-uni-button",{attrs:{type:"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.add.apply(void 0,arguments)}}},[t._v("添加成员")]),0!==t.pro_member.length?e("v-uni-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.del.apply(void 0,arguments)}}},[t._v("删除")]):t._e()],1)],1)],1)},a=[]},6305:function(t,i,e){"use strict";e("99af"),e("a434"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={data:function(){return{pro_name:"",pro_type:"",pro_to:"",pro_link_person:"",pro_position:"",pro_phone:"",pro_place:"",pro_handle:[],pro_price:"",pro_member:[],numList:[{name:"新建项目"},{name:"签署合同"},{name:"进行中"},{name:"结束及归档"}],num:0,index:-1,picker:["清单、拦标价","审计、评审","工程结算审核","造价鉴定","工程咨询"],multiArray1:[],multiIndex1:[0,0],multiArray2:[],multiIndex2:[0,0],imgList:[],modalName:null,textareaAValue:"",textareaBValue:"",rrr:[],id:""}},onLoad:function(t){if(t.detailDate){var i=JSON.parse(t.detailDate),e=i.id;this.id=e,console.log(this.id),this.pro_name=i.pro_name,this.pro_to=i.pro_to,this.pro_link_person=i.pro_link_person,this.pro_position=i.pro_position,this.pro_phone=i.pro_phone,this.pro_place=i.pro_place,this.pro_price=i.pro_price,this.pro_handle=i.pro_handle,this.pro_member=i.pro_member,this.index=i.index,uni.setNavigationBarTitle({title:i.pro_name})}this.GetDeptUser()},onNavigationBarButtonTap:function(t){console.log(t),this.Submit()},methods:{Submit:function(){this.pro_name.length<2?uni.showToast({title:"标题不能为空(至少2个字)",icon:"none"}):this.picker[this.index]?this.pro_to.length<2?uni.showToast({title:"项目向对方不能为空",icon:"none"}):this.pro_link_person.length<2?uni.showToast({title:"联系人不能为空",icon:"none"}):this.pro_position.length<2?uni.showToast({title:"职务不能为空",icon:"none"}):this.pro_phone.length<2?uni.showToast({title:"号码不能为空",icon:"none"}):this.pro_place<2?uni.showToast({title:"项目地点不能为空",icon:"none"}):uni.request({url:"http://103.222.189.2:9005/center/center/add_pro/",method:"POST",data:{id:this.id,name:uni.getStorageSync("UNAME"),pro_name:this.pro_name,pro_type:this.index,pro_to:this.pro_to,pro_link_person:this.pro_link_person,pro_position:this.pro_position,pro_phone:this.pro_phone,pro_place:this.pro_place,pro_price:this.pro_price,pro_handle:this.pro_handle,pro_member:this.pro_member,pro_status:this.num,pro_type_name:this.picker[this.index],token:uni.getStorageSync("UTOKEN")},success:function(t){console.log(t.data),"success"==t.data.msg&&(uni.showToast({title:"发布成功",icon:"none"}),uni.navigateTo({url:"center"}))},fail:function(){},complete:function(){}}):uni.showToast({title:"请选择项目类型",icon:"none"})},ChangeSteps:function(t){console.log(t),this.num=t},GetDeptUser:function(){var t=this;uni.request({url:"http://103.222.189.2:9005/center/center/get_dept_user/",method:"GET",data:{token:uni.getStorageSync("UTOKEN")},success:function(i){var e=[],n=[],r=[];console.log(i);for(var a=0;a<i.data.dept.length;a++){var o=i.data.dept[a];for(var s in o)e=e.concat(s),n=o[s],r=r.concat([n])}r.splice(0,0,e),t.multiArray1=[r[0],r[1]],t.multiArray2=[r[0],r[1]],t.rrr=r},fail:function(){},complete:function(){}})},PickerChange:function(t){this.index=t.detail.value},MultiChange1:function(t){this.multiIndex1=t.detail.value},MultiColumnChange1:function(t){var i={multiArray1:this.multiArray1,multiIndex1:this.multiIndex1};switch(i.multiIndex1[t.detail.column]=t.detail.value,t.detail.column){case 0:switch(i.multiIndex1[0]){case 0:i.multiArray1[1]=this.rrr[1];break;case 1:i.multiArray1[1]=this.rrr[2];break;case 2:i.multiArray1[1]=this.rrr[3];break;case 3:i.multiArray1[1]=this.rrr[4];break;case 4:i.multiArray1[1]=this.rrr[5];break;case 5:i.multiArray1[1]=this.rrr[6];break;case 6:i.multiArray1[1]=this.rrr[7];break;case 7:i.multiArray1[1]=this.rrr[8];break}i.multiIndex1[1]=0,i.multiIndex1[2]=0;break}this.multiArray1=i.multiArray1,this.multiIndex1=i.multiIndex1,this.pro_handle=[this.multiArray1[0][this.multiIndex1[0]],this.multiArray1[1][this.multiIndex1[1]]]},MultiChange2:function(t){this.multiIndex2=t.detail.value,this.pro_member.xx=[this.multiArray2[0][this.multiIndex2[0]],this.multiArray2[1][this.multiIndex2[1]]]},MultiColumnChange2:function(t){var i={multiArray2:this.multiArray2,multiIndex2:this.multiIndex2};switch(i.multiIndex2[t.detail.column]=t.detail.value,t.detail.column){case 0:switch(i.multiIndex2[0]){case 0:i.multiArray2[1]=this.rrr[1];break;case 1:i.multiArray2[1]=this.rrr[2];break;case 2:i.multiArray2[1]=this.rrr[3];break;case 3:i.multiArray2[1]=this.rrr[4];break;case 4:i.multiArray2[1]=this.rrr[5];break;case 5:i.multiArray2[1]=this.rrr[6];break;case 6:i.multiArray2[1]=this.rrr[7];break;case 7:i.multiArray2[1]=this.rrr[8];break}i.multiIndex2[1]=0,i.multiIndex2[2]=0;break}this.multiArray2=i.multiArray2,this.multiIndex2=i.multiIndex2},add:function(){this.pro_member.length<100?this.pro_member.push({xx:[this.multiArray2[0][this.multiIndex2[0]],this.multiArray2[1][this.multiIndex2[1]]]}):uni.showToast({title:"最多添加100个",icon:"none"})},del:function(){this.pro_member.splice(this.pro_member.length-1,1)},re:function(t){this.pro_member[t].xx=[this.multiArray2[0][this.multiIndex2[0]],this.multiArray2[1][this.multiIndex2[1]]]}}};i.default=n},"6a5d":function(t,i,e){"use strict";e.r(i);var n=e("6305"),r=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(i,t,(function(){return n[t]}))}(a);i["default"]=r.a},8113:function(t,i,e){"use strict";var n=e("9658"),r=e.n(n);r.a},9658:function(t,i,e){var n=e("c385");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=e("4f06").default;r("05b45935",n,!0,{sourceMap:!1,shadowMode:!1})},c385:function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,".cu-form-group .title[data-v-0c7aa622]{min-width:calc(4em + 15px)}",""]),t.exports=i}}]);