(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-center-detail"],{"1e8e":function(e,t,i){"use strict";i.r(t);var n=i("b14d"),a=i("c5f5");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("c74c");var o,s=i("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"6e56a659",null,!1,n["a"],o);t["default"]=c.exports},2040:function(e,t,i){var n=i("41b4");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("6d9a0d70",n,!0,{sourceMap:!1,shadowMode:!1})},"2a64":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("4ea4");__webpack_require__("99af"),__webpack_require__("a434"),__webpack_require__("e25e"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _share=_interopRequireDefault(__webpack_require__("f37f")),_dragBall=_interopRequireDefault(__webpack_require__("d45b")),_zhongcao=_interopRequireDefault(__webpack_require__("db96")),_index=_interopRequireDefault(__webpack_require__("442e")),_mescrollMixins=_interopRequireDefault(__webpack_require__("1b06")),_mock=__webpack_require__("cda0"),loginRes,_default={mixins:[_mescrollMixins.default],components:{share:_share.default,dragball:_dragBall.default,zhongchao:_zhongcao.default,HmTaskListCard:_index.default,centerSearch:_mock.centerSearch},onShow:function(){},onLoad:function(e){var t=e.detailDate||e.payload;try{this.banner=JSON.parse(decodeURIComponent(t)),this.href=this.banner.href,this.filepath=this.banner.title}catch(r){this.banner=JSON.parse(t)}this.id=this.banner.pk,this.getDetail(),uni.setNavigationBarTitle({title:this.banner.title});var i=uni.getStorageSync("UISBOSS"),n=uni.getStorageSync("UISADMIN"),a=uni.getStorageSync("UISLEADER");uni.getStorageSync("UNAME");"true"!=i&&"true"!=n&&"true"!=a||(this.canPublicsh=!0)},data:function(){return{isShow:!0,id:"",flag:!1,canPublicsh:!1,pro_name:"",pro_type:"",pro_type_name:"",pro_to:"",pro_link_person:"",pro_position:"",pro_phone:"",pro_place:"",pro_handle:"",pro_member:"",pro_price:"",files:[],filedic:[],filepath:"123",fabList:[{bgColor:"#16C2C2",text:"编辑",fontSize:28,color:"#fff"},{bgColor:"#16C2C2",text:"删除",fontSize:28,color:"#fff"}],TabCur:0,tabBars:[{name:"项目详情",id:"0"},{name:"项目文档",id:"1"},{name:"项目日志",id:"2"}],numList:[{name:"新建项目"},{name:"签署合同"},{name:"进行中"},{name:"结束及归档"}],num:3,downOption:{},upOption:{noMoreSize:3,empty:{tip:"~ 搜索无结果 ~"}},curWord:"",multiIndex:[0,0,0],imgList:[],modalName:null,textareaAValue:"",textareaBValue:""}},watch:{curWord:function(){this.mescroll.resetUpScroll()}},methods:{getDetail:function getDetail(){var _this=this;uni.request({url:"http://103.222.189.2:9005/center/center/get_center_list/",method:"POST",data:{pk:this.id,token:uni.getStorageSync("UTOKEN")},success:function success(res){var result=res.data.data[0].fields;console.log(result),_this.pro_name=result.title,_this.index=parseInt(result.pro_type),_this.pro_type_name=result.pro_type_name,_this.pro_to=result.pro_to,_this.pro_link_person=result.pro_link_person,_this.pro_position=result.pro_position,_this.pro_phone=result.pro_phone,_this.pro_place=result.pro_place,_this.pro_price=result.pro_price,_this.pro_handle=eval(result.pro_handle),_this.pro_member=eval(result.pro_member),_this.num=result.pro_status,console.log(_this.pro_handle[1]),console.log(uni.getStorageSync("UNAME")),_this.pro_handle[1]==uni.getStorageSync("UNAME")&&(_this.canPublicsh=!0)},fail:function(){},complete:function(){}})},getFileList:function(){var e=this;uni.request({url:"http://103.222.189.2:9005/center/center/get_center_file/",method:"POST",header:{"content-type":"application/json"},data:{pro_name:this.filepath,token:uni.getStorageSync("UTOKEN")},success:function(t){for(var i in t.data.data){var n=t.data.data[i].fields;e.filedic=e.filedic.concat(n)}e.getFiledetai(e.filedic)},fail:function(){},complete:function(){}})},ishasfile:function(e){return""!=e||(console.log(e),!1)},tabSelect:function(e){this.TabCur=e.currentTarget.dataset.id},ChooseImage:function(){var e=this;uni.chooseImage({count:4,sizeType:["original","compressed"],sourceType:["album"],success:function(t){0!=e.imgList.length?e.imgList=e.imgList.concat(t.tempFilePaths):e.imgList=t.tempFilePaths}})},ViewImage:function(e){uni.previewImage({urls:this.imgList,current:e.currentTarget.dataset.url})},DelImg:function(e){var t=this;uni.showModal({title:"提示",content:"确定删除吗？",cancelText:"再看看",confirmText:"再见",success:function(i){i.confirm&&t.imgList.splice(e.currentTarget.dataset.index,1)}})},handleShare:function(){this.$refs.refShare.handleShowShare()},jump_write:function(){uni.navigateTo({url:"./write"})},upCallback:function(e){var t=this;console.log(e),1==e.num&&(this.files=[]),(0,_mock.fileSearch)(e.num,e.size,this.curWord,this.pro_name).then((function(e){t.mescroll.endSuccess(e.length),t.files=t.files.concat(e)})).catch((function(){t.mescroll.endErr()}))},handleFab:function(e){var t=e.index;switch(t){case 0:var i={pro_name:this.pro_name,pro_to:this.pro_to,pro_link_person:this.pro_link_person,pro_position:this.pro_position,pro_phone:this.pro_phone,pro_place:this.pro_place,pro_price:this.pro_price,pro_handle:this.pro_handle,pro_member:this.pro_member,index:this.index,id:this.id};uni.navigateTo({url:"../center/newProject?detailDate="+encodeURIComponent(JSON.stringify(i))});break;case 1:console.log(this.id);var n=this.id;uni.showModal({title:"提示",content:"是否删除",success:function(e){console.log(n),e.confirm?(console.log(this.apiServer),uni.request({url:"http://103.222.189.2:9005/center/center/delete_center/",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{id:n,token:uni.getStorageSync("UTOKEN")},success:function(e){console.log(e),uni.showToast({title:"删除成功"}),uni.navigateTo({url:"../center/center"})},fail:function(e){console.log(e)},complete:function(){}})):e.cancel&&console.log("用户点击取消")}});break}}}};exports.default=_default},"41b4":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".banner[data-v-6e56a659]{height:%?360?%;overflow:hidden;position:relative;background-color:#fff}.cu-form-group .title[data-v-6e56a659]{min-width:calc(4em + 15px)}.footer[data-v-6e56a659]{width:100%;height:%?88?%;position:fixed;left:0;bottom:0;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#fff}\n/*关键词搜索*/.item[data-v-6e56a659]{padding:%?20?%}.tip[data-v-6e56a659]{font-size:%?30?%;vertical-align:middle}.hot-word[data-v-6e56a659]{font-size:%?24?%;margin-left:%?30?%;padding:%?6?% %?40?%;border:%?2?% solid #ff6990;-webkit-border-radius:%?100?%;border-radius:%?100?%;vertical-align:middle;color:#ff6990}.word-input[data-v-6e56a659]{display:inline-block;width:100%;padding:%?4?%;font-size:%?46?%;margin-left:%?0?%;border:%?2?% solid #18b4fe;-webkit-border-radius:%?60?%;border-radius:%?60?%;text-align:center;background-color:#fff;vertical-align:middle}",""]),e.exports=t},b14d:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return n}));var n={yFab:i("fb4f").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-scroll-view",{staticClass:"bg-white nav",attrs:{"scroll-x":"true"}},[i("v-uni-view",{staticClass:"flex text-center"},e._l(e.tabBars,(function(t,n){return i("v-uni-view",{key:n,staticClass:"cu-item flex-sub",class:n==e.TabCur?"text-orange cur":"",staticStyle:{"font-size":"36rpx"},attrs:{"data-id":n},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.tabSelect.apply(void 0,arguments)}}},[e._v(e._s(t.name))])})),1)],1),0==e.TabCur?i("v-uni-view",[i("v-uni-form",[i("v-uni-view",{staticClass:"bg-white padding"},[i("v-uni-view",{staticClass:"cu-steps"},e._l(e.numList,(function(t,n){return i("v-uni-view",{key:n,staticClass:"cu-item",class:n>e.num?"":"text-blue"},[i("v-uni-text",{staticClass:"num",attrs:{"data-index":n+1}}),e._v(e._s(t.name))],1)})),1)],1),i("v-uni-view",{staticClass:"cu-form-group margin-top"},[i("v-uni-view",{staticClass:"title"},[e._v("项目名称")]),i("v-uni-text",[e._v(e._s(e.pro_name))])],1),i("v-uni-view",{staticClass:"cu-form-group margin-top",staticStyle:{"margin-top":"0px"}},[i("v-uni-view",{staticClass:"title"},[e._v("项目类型")]),i("v-uni-text",[e._v(e._s(e.pro_type_name))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v("项目相对方")]),i("v-uni-text",[e._v(e._s(e.pro_to))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v("联系人")]),i("v-uni-text",[e._v(e._s(e.pro_link_person))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v("职务")]),i("v-uni-text",[e._v(e._s(e.pro_position))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v("手机号码")]),i("v-uni-text",[e._v(e._s(e.pro_phone))]),i("v-uni-view",{staticClass:"cu-capsule radius"},[i("v-uni-view",{staticClass:"cu-tag bg-blue "},[e._v("+86")]),i("v-uni-view",{staticClass:"cu-tag line-blue"},[e._v("中国大陆")])],1)],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v("项目地点")]),i("v-uni-text",[e._v(e._s(e.pro_place))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v("预估收费")]),i("v-uni-text",{staticClass:"text-price"},[e._v(e._s(e.pro_price))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v("项目经理")]),i("v-uni-text",{staticClass:"text-right"},[e._v(e._s(e.pro_handle[0])+","+e._s(e.pro_handle[1]))])],1),e._l(e.pro_member,(function(t,n){return i("v-uni-view",{key:n,staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v("项目成员")]),i("v-uni-text",{staticClass:"text-center"},[e._v(e._s(t.xx[0])+","+e._s(t.xx[1]))])],1)}))],2),e.canPublicsh?i("y-Fab",{attrs:{bottom:10,right:320,btnList:e.fabList},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleFab.apply(void 0,arguments)}}}):e._e()],1):e._e(),1==e.TabCur?i("v-uni-view",[i("mescroll-body",{ref:"mescrollRef",attrs:{down:e.downOption,up:e.upOption},on:{init:function(t){arguments[0]=t=e.$handleEvent(t),e.mescrollInit.apply(void 0,arguments)},down:function(t){arguments[0]=t=e.$handleEvent(t),e.downCallback.apply(void 0,arguments)},up:function(t){arguments[0]=t=e.$handleEvent(t),e.upCallback.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"item"},[i("v-uni-input",{staticClass:"word-input",attrs:{placeholder:"请输入文件名"},model:{value:e.curWord,callback:function(t){e.curWord=t},expression:"curWord"}})],1),e._l(e.files,(function(t,n){return e.ishasfile(e.files)?i("v-uni-view",{key:n,staticClass:"banner",staticStyle:{height:"260rpx",color:"white"}},[i("div",{staticClass:"test-component",staticStyle:{"margin-top":"px"}},[i("hm-task-list-card",{attrs:{options:t,isShow:e.isShow}})],1)]):e._e()}))],2),i("v-uni-view",[i("v-uni-button",{staticClass:"footer",attrs:{type:"primary",plain:"true"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleShare.apply(void 0,arguments)}}},[e._v("文件上传")]),i("share",{ref:"refShare",attrs:{options:e.filepath}})],1)],1):e._e(),2==e.TabCur?i("v-uni-view",[i("zhongchao",{attrs:{pro_name:e.pro_name},on:{jump_write:function(t){arguments[0]=t=e.$handleEvent(t),e.jump_write.apply(void 0,arguments)}}})],1):e._e()],1)},r=[]},c5f5:function(e,t,i){"use strict";i.r(t);var n=i("2a64"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t["default"]=a.a},c74c:function(e,t,i){"use strict";var n=i("2040"),a=i.n(n);a.a}}]);